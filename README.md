# pytest-typed-schema-shot

–ü–ª–∞–≥–∏–Ω –¥–ª—è pytest, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON Schema –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Å—Ö–µ–º–∞–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JSON Schema –ø–æ –ø—Ä–∏–º–µ—Ä–∞–º –¥–∞–Ω–Ω—ã—Ö
- üì∏ –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ö–µ–º –∫–∞–∫ —Å–Ω—ç–ø—à–æ—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ—Ç–∏–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ö–µ–º
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º —á–µ—Ä–µ–∑ `--schema-update`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install pytest-typed-schema-shot
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –í –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å—Ç—É—Ä—É `schemashot`:

```python
@pytest.mark.asyncio
async def test_something(schemashot):
    data = await API.data()
    schemashot.assert_match(data, "data")
```

2. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--schema-update` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º:

```bash
pytest --schema-update
```

3. –í –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Å—Ö–µ–º–∞–º:

```bash
pytest
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Union-—Ç–∏–ø—ã**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –ø–æ–ª–µ–π
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- **–û—á–∏—Å—Ç–∫–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ö–µ–º –ø—Ä–∏ `--schema-update`

## API

### SchemaShot

```python
class SchemaShot:
    def assert_match(self, data: Any, name: str) -> None:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º–µ.
        
        Args:
            data: –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            name: –ò–º—è —Å—Ö–µ–º—ã
        """
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/pytest-typed-schema-shot.git
cd pytest-typed-schema-shot
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
python -m venv venv
source venv/bin/activate
pip install -e ".[dev]"
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
```bash
pytest
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
